(()=>{"use strict";var e={607:function(e,t,r){var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,s){function i(e){try{a(n.next(e))}catch(e){s(e)}}function u(e){try{a(n.throw(e))}catch(e){s(e)}}function a(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,u)}a((n=n.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var r,n,o,s,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function u(s){return function(u){return function(s){if(r)throw new TypeError("Generator is already executing.");for(;i;)try{if(r=1,n&&(o=2&s[0]?n.return:s[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,s[1])).done)return o;switch(n=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,n=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){i=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){i.label=s[1];break}if(6===s[0]&&i.label<o[1]){i.label=o[1],o=s;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(s);break}o[2]&&i.ops.pop(),i.trys.pop();continue}s=t.call(e,i)}catch(e){s=[6,e],n=0}finally{r=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};t.__esModule=!0,t.processMessage=void 0;var i=r(200),u=s(r(480)),a=new u.default.SharedIniFileCredentials({profile:"default"});u.default.config.update({credentials:a,region:"eu-north-1"}),t.processMessage=function(e){return n(void 0,void 0,void 0,(function(){return o(this,(function(t){if(console.log("country: ",e.MessageAttributes.Country),console.log("region: ",e.MessageAttributes.Region),!e.MessageAttributes.Country||!e.MessageAttributes.Region)throw new Error("Missing fields");return console.log(e),[2]}))}))};var l=i.Consumer.create({queueUrl:"https://sqs.eu-north-1.amazonaws.com/286643423608/vs-prto-test-queue",handleMessage:function(e){return n(void 0,void 0,void 0,(function(){return o(this,(function(r){return[2,t.processMessage(e)]}))}))},sqs:new u.default.SQS,messageAttributeNames:["All"]});l.on("error",(function(e){console.error(e.message)})),l.on("processing_error",(function(e){console.error(e.message)})),console.log("queue service is running"),l.start(),t.default=l},480:e=>{e.exports=require("aws-sdk")},200:e=>{e.exports=require("sqs-consumer")}},t={};!function r(n){var o=t[n];if(void 0!==o)return o.exports;var s=t[n]={exports:{}};return e[n].call(s.exports,s,s.exports,r),s.exports}(607)})();